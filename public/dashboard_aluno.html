<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard do Aluno - Sistema de Fila</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- Header -->
  <header>
    <div class="logo">
      <img src="img/logo.png" alt="Logo SESI SENAI">
    </div>
    <nav>
      <ul>
        <li><a href="dashboard-aluno.html" class="active">Home</a></li>
        <li><a href="historico-individual.html">Histórico Individual</a></li>
        <li><a href="perfil-aluno.html">Meu Perfil</a></li>
      </ul>
    </nav>
    <a href="#" class="btn-header" id="btnLogout">Sair</a>
  </header>

  <!-- Botão Voltar -->
  <a href="index.html" class="btn-voltar"><img src="img/seta-esquerda.png" alt=""></a>

  <!-- Conteúdo Principal -->
  <main class="dashboard-container">
    <div class="dashboard-header">
      <h1>Dashboard do Aluno</h1>
      <div class="user-info">
        <span id="nomeAluno">Carregando...</span>
      </div>
    </div>

    <div class="dashboard-content">
      <!-- Status do Banheiro -->
      <div class="dashboard-card">
        <h2>Status do Banheiro</h2>
        <div class="status-indicator" id="statusBanheiro">
          <span class="status-text">Carregando...</span>
          <span class="status-icon">⏳</span>
        </div>
        <div id="infoUsuarioBanheiro" style="margin-top: 10px; font-size: 0.9rem; color: #666;"></div>
      </div>

      <!-- Controle de Saída -->
      <div class="dashboard-card">
        <h2>Controle de Saída</h2>
        <div class="info-fila" id="infoFila">
          <p>Verificando sua situação...</p>
        </div>
        <div class="btn-group-vertical">
          <button id="btnSolicitar" class="btn">Solicitar Saída para Banheiro</button>
          <button id="btnRetornar" class="btn btn-secundario" disabled>Registrar Retorno</button>
          <button id="btnCancelar" class="btn btn-desabilitado" disabled>Cancelar Solicitação</button>
        </div>
        <div id="tempoDecorrido" style="margin-top: 15px; text-align: center; font-weight: bold; color: #467599;"></div>
      </div>

      <!-- Fila de Espera -->
      <div class="dashboard-card">
        <h2>Fila de Espera <span id="contadorFila" style="background: #467599; color: white; padding: 2px 8px; border-radius: 10px; font-size: 0.8rem;">0</span></h2>
        <div class="fila-container">
          <div id="listaFila" class="fila-lista">
            <p class="fila-vazia">Nenhum aluno na fila no momento</p>
          </div>
        </div>
        <div style="margin-top: 10px; font-size: 0.8rem; color: #666;">
          <strong>Próximo da fila:</strong> <span id="proximoFila">-</span>
        </div>
      </div>

      <!-- Histórico Recente -->
      <div class="dashboard-card">
        <h2>Meu Histórico Recente</h2>
        <div class="table-container">
          <table>
            <thead>
              <tr>
                <th>Data</th>
                <th>Hora Saída</th>
                <th>Hora Retorno</th>
                <th>Tempo</th>
                <th>Status</th>
              </tr>
            </thead>
            <tbody id="historicoAluno">
              <tr>
                <td colspan="5" class="text-center">Carregando histórico...</td>
              </tr>
            </tbody>
          </table>
        </div>
        <div style="text-align: center; margin-top: 10px;">
          <a href="historico-individual.html" class="btn" style="padding: 8px 16px; font-size: 0.9rem;">Ver Histórico Completo</a>
        </div>
      </div>

      <!-- Regras do Sistema -->
      <div class="dashboard-card">
        <h2>Regras do Sistema</h2>
        <div style="font-size: 0.9rem; line-height: 1.4;">
          <p>✅ Tempo máximo: 10 minutos</p>
          <p>✅ Apenas 1 aluno por vez no banheiro</p>
          <p>✅ Sistema de fila por ordem de chegada</p>
          <p>❌ Não é permitido furar a fila</p>
          <p>⚠️ Tempo excessivo será registrado</p>
        </div>
      </div>
    </div>
  </main>

  <script src="script.js"></script>
  <script src="dashboard-aluno.js"></script>
</body>
</html>